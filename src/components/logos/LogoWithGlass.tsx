import React from "react";
import { cn } from '@/lib/utils';

/** The exact shield path from the GlobalHairLogo SVG's FIRST path */
const SHIELD_PATH_D = `
M256,296.81l-1.39-.64c-27.82-12.8-50.21-25.2-64.21-57.93-13.23-30.94-12.19-101.68-12.14-104.68l.06-3.27h3.27
c16.61,0,72.69-20.79,73.26-21l1.16-.43,1.16.43c.56.21,56.65,21,73.26,21h3.27l.06,3.27c.05,3,1.09,73.73-12.14,104.68
-14,32.73-36.39,45.13-64.21,57.93l-1.39.64h-.02ZM184.88,136.75c-.05,14.1.46,72.76,11.63,98.87,12.87,30.1,32.8,41.51,59.49,53.87,26.69-12.35,46.62-23.77,59.49-53.87,11.16-26.11,11.67-84.77,11.63-98.87-19.04-1.89-63.17-17.88-71.12-20.8-7.94,2.92-52.08,18.91-71.12,20.8Z
`;

// ---------- Styles (scoped) ----------
const styles = `
.logo-glass-wrap{position:relative;display:inline-block;line-height:0}
.logo-box{position:relative;width:100%;height:100%}
.glass-html{width:100%;height:100%;background:rgba(255,255,255,.14);
  border:1px solid rgba(255,255,255,.38);border-radius:16px;
  backdrop-filter:blur(28px) saturate(160%);-webkit-backdrop-filter:blur(28px) saturate(160%);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.6),0 10px 28px rgba(0,0,0,.24)}
/* Layer order: glass under, logo over */
.glass-layer{position:absolute;inset:0;z-index:0;pointer-events:none}
.logo-layer{position:relative;z-index:1}

/* Default: use CSS clip-path:path() fallback (works on HTML elements) */
.glass-css{display:block;clip-path:path(var(--shield-path));}

/* If foreignObject + backdrop-filter supported, prefer the SVG-native version for perfect alignment. */
@supports (backdrop-filter: blur(1px)) {
  .glass-css{display:none}
  .glass-svg{display:block}
}

/* Make sure the container is square and scales the 512 viewBox cleanly */
.logo-box{aspect-ratio:1/1}
`;

// ---------- The GlobalHairLogo SVG (minus the first background path fill) ----------
const LOGO_SVG = ({ className }: { className?: string }) => (
  <svg
    className={cn("logo-svg", className)}
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 512 512"
    width="100%"
    height="100%"
    aria-hidden
  >
    <defs>
      <style>{`.cls-1{fill:#fff;stroke-width:0}`}</style>
    </defs>

    {/* (We do NOT draw the original first path as a white fill; the glass layer replaces it.) */}

    <path className="cls-1" d="M202.65,169.79s20.05,15.12,23.11,27.27,2.76,20.16-.36,28.09c-3.13,7.93-4.51,23.72,3.71,33.69,0,0-7.26-12.48,1.38-30.05,8.95-18.19,11.14-45.15-27.84-58.99h0Z"/>
    <path className="cls-1" d="M240.46,233.99c5.89-19.32,22.15-52.17-21.18-80.22,0,0,27.4,33.83,19.76,63.85-7.64,30.01-9.6,34.16,4.58,47.48,0,0-9.06-11.79-3.17-31.11h.01Z"/>
    <path className="cls-1" d="M309.35,169.79c-38.98,13.84-36.79,40.8-27.84,58.99,8.64,17.57,1.38,30.05,1.38,30.05,8.22-9.97,6.84-25.76,3.71-33.69-3.13-7.93-3.42-15.93-.36-28.09,3.06-12.15,23.11-27.27,23.11-27.27h0Z"/>
    <path className="cls-1" d="M292.71,153.77c-43.32,28.05-27.07,60.9-21.18,80.22,5.89,19.32-3.17,31.11-3.17,31.11,14.19-13.32,12.22-17.46,4.58-47.48-7.64-30.01,19.76-63.85,19.76-63.85h.01Z"/>

    <g>
      <path className="cls-1" d="M93.19,367.44c-11.21,0-18.74-7.2-18.74-17.93s7.68-18.92,18.69-18.92c3.1,0,5.46.48,7.43,1.52.07.04.15.05.22.05.05,0,.11,0,.16-.03.13-.05.23-.14.28-.27l.99-2.39h.76l2.92,13-1.64.56-2.78-4.3c-2.65-4.15-5.23-5.77-9.22-5.77-7.1,0-11.52,5.44-11.52,14.2,0,10.7,5.43,17.88,13.5,17.88,2.51,0,4.47-.67,6.15-2.1.11-.09.17-.22.17-.36v-8.35c0-1.67-.72-2.44-2.42-2.58l-3.3-.36v-1.61h15v1.63l-1.12.17c-1.64.28-2.33,1.11-2.33,2.75v8.72c-3.56,2.97-7.99,4.48-13.19,4.48h0Z"/>
      <path className="cls-1" d="M115.37,366.79v-1.61l1.68-.19c1.65-.21,2.29-.99,2.29-2.81v-26.35c0-1.82-.64-2.6-2.29-2.81l-1.69-.23v-1.62h14.47v1.61l-2.09.24c-1.84.2-2.52.96-2.52,2.81v24.94c0,2.68.83,3.63,3.16,3.63h5.94c2.41,0,3.5-.78,4.47-3.22l2.45-5.95h2.43l-2.32,11.55h-25.99.01Z"/>
      <path className="cls-1" d="M166.82,367.44c-11.14,0-18.63-7.25-18.63-18.04s7.69-18.8,18.28-18.8c11.14,0,18.63,7.25,18.63,18.04s-7.69,18.8-18.28,18.8ZM165.65,333.03c-6.89,0-11.17,5.46-11.17,14.26,0,10.43,5.46,17.71,13.27,17.71,6.92,0,11.05-5.33,11.05-14.26,0-10.43-5.41-17.71-13.15-17.71h0Z"/>
      <path className="cls-1" d="M190.52,366.79v-1.61l1.68-.19c1.65-.21,2.29-.99,2.29-2.81v-26.35c0-1.82-.64-2.6-2.29-2.81l-1.69-.23v-1.62h16.29c6.79,0,10.68,2.94,10.68,8.05,0,3.99-2.34,6.95-6.43,8.13-.21.06-.35.26-.34.48,0,.22.17.4.39.44,5.17.96,8.14,4.15,8.14,8.76,0,5.83-4.97,9.75-12.38,9.75h-16.35.01ZM200.85,349.21c-.26,0-.47.21-.47.47v14.25c0,.26.21.47.47.47h4.03c5.09,0,8.01-2.77,8.01-7.6s-2.92-7.6-8.01-7.6h-4.03ZM200.85,333.55c-.26,0-.47.21-.47.47v12.33c0,.26.21.47.47.47h3.74c4.36,0,6.67-2.31,6.67-6.67s-2.43-6.61-7.02-6.61h-3.39Z"/>
      <path className="cls-1" d="M246.14,366.79v-1.62l1.51-.18c.62-.07,2.52-.29,2.52-2.05,0-.6-.19-1.3-.57-2.13l-2.09-5.18c-.07-.18-.25-.3-.44-.3h-13.26c-.2,0-.37.12-.44.3l-2.16,5.49c-.36.77-.5,1.3-.5,1.87,0,1.47,1.26,1.8,2.44,1.99l1.53.19v1.62h-10.85v-1.64l.65-.11c1.5-.2,2.23-.85,2.99-2.68l12.62-31.19h3.74l13.08,31.43c.59,1.43,1.3,2.06,2.62,2.33l.96.21v1.65h-14.36.01ZM240.34,338.7c-.19,0-.37.12-.44.3l-5.2,13.26c-.06.15-.04.31.05.44s.24.21.39.21h10.57c.16,0,.31-.08.39-.21.09-.13.11-.3.05-.44l-5.37-13.26c-.07-.18-.25-.3-.44-.3h0Z"/>
      <path className="cls-1" d="M265.29,366.79v-1.61l1.68-.19c1.65-.21,2.29-.99,2.29-2.81v-26.35c0-1.82-.64-2.6-2.29-2.81l-1.69-.23v-1.62h14.47v1.61l-2.09.24c-1.84.2-2.52.96-2.52,2.81v24.94c0,2.68.83,3.63,3.16,3.63h5.94c2.41,0,3.5-.78,4.47-3.22l2.45-5.95h2.43l-2.32,11.55h-25.99,0Z"/>
      <path className="cls-1" d="M322.78,366.79v-1.61l1.74-.19c1.65-.21,2.29-.99,2.29-2.81v-12.15c0-.26-.21-.47-.47-.47h-16.94c-.26,0-.47.21-.47.47v12.15c0,1.82.64,2.6,2.29,2.81l1.75.19v1.61h-13.89v-1.61l1.68-.19c1.65-.21,2.29-.99,2.29-2.81v-26.35c0-1.82-.64-2.6-2.29-2.81l-1.69-.23v-1.62h13.89v1.62l-1.75.24c-1.64.2-2.28.99-2.28,2.81v10.69c0,.26.21.47.47.47h16.94c.26,0,.47-.21.47-.47v-10.69c0-1.82-.64-2.6-2.29-2.81l-1.75-.24v-1.62h13.89v1.62l-1.75.24c-1.64.2-2.28.99-2.28,2.81v26.35c0,1.82.64,2.6,2.29,2.81l1.75.19v1.61h-13.89Z"/>
      <path className="cls-1" d="M363.31,366.79v-1.62l1.51-.18c.62-.07,2.52-.29,2.52-2.05,0-.6-.19-1.3-.57-2.13l-2.09-5.18c-.07-.18-.25-.3-.44-.3h-13.26c-.2,0-.37.12-.44.3l-2.16,5.49c-.36.77-.5,1.3-.5,1.87,0,1.47,1.26,1.8,2.44,1.99l1.53.19v1.62h-10.85v-1.64l.65-.11c1.5-.2,2.23-.85,2.99-2.68l12.62-31.19h3.74l13.08,31.43c.59,1.43,1.3,2.06,2.62,2.33l.96.21v1.65h-14.36.01ZM357.52,338.7c-.19,0-.37.12-.44.3l-5.20,13.26c-.06.15-.04.31.05.44s.24.21.39.21h10.57c.16,0,.31-.08.39-.21.09-.13.11-.3.05-.44l-5.37-13.26c-.07-.18-.25-.3-.44-.30h0Z"/>
      <path className="cls-1" d="M382.59,366.79v-1.61l1.74-.19c1.65-.21,2.29-.99,2.29-2.81v-26.35c0-1.82-.64-2.6-2.29-2.81l-1.75-.24v-1.62h13.89v1.62l-1.75.24c-1.64.2-2.28.99-2.28,2.81v26.35c0,1.82.64,2.6,2.29,2.81l1.75.19v1.61h-13.89Z"/>
      <path className="cls-1" d="M431.48,366.79c-2.83,0-4.41-1.27-5.63-4.54l-2.63-7.24c-1.31-3.54-2.16-4.99-5.29-4.99h-2.51c-.26,0-.47.21-.47.47v11.68c0,1.82.64,2.6,2.29,2.81l1.75.19v1.61h-13.89v-1.61l1.68-.19c1.65-.21,2.29-.99,2.29-2.81v-26.35c0-1.82-.64-2.6-2.29-2.81l-1.69-.23v-1.62h16.41c7.64,0,11.85,3.19,11.85,8.99,0,4.01-2.82,8.46-9.11,9.34-.23.03-.4.22-.41.45s.15.43.37.48c2.82.63,4.13,2.36,5.22,4.76l2.57,5.84c1.02,2.41,2.22,3.5,4.26,3.9l1.31.23v1.64h-6.08ZM415.42,333.55c-.26,0-.47.21-.47.47v13.26c0,.26.21.47.47.47h3.97c4.69,0,7.6-2.71,7.6-7.08s-2.83-7.13-7.78-7.13h-3.8,0Z"/>
    </g>

    <g>
      <path className="cls-1" d="M175.07,389.62h2.47v16.47h-2.47v-16.47Z"/>
      <path className="cls-1" d="M190.74,393.45v12.64h-2.47v-16.47h2.54l8.96,12.34v-12.34h2.47v16.47h-2.39l-9.11-12.64Z"/>
      <path className="cls-1" d="M212.36,401.86c1.11,1.23,2.89,2.32,5.18,2.32,2.67,0,3.6-1.36,3.6-2.54,0-1.73-1.88-2.22-3.97-2.77-2.64-.69-5.7-1.46-5.7-4.81,0-2.72,2.39-4.69,5.83-4.69,2.54,0,4.54.81,6,2.3l-1.43,1.83c-1.26-1.33-2.99-1.93-4.76-1.93s-3.09.94-3.09,2.32c0,1.48,1.78,1.95,3.83,2.47,2.69.72,5.83,1.55,5.83,5.06,0,2.57-1.78,4.96-6.22,4.96-2.94,0-5.09-1.06-6.49-2.62l1.41-1.9h-.02Z"/>
      <path className="cls-1" d="M236.47,391.79h-5.11v-2.17h12.67v2.17h-5.09v14.29h-2.47v-14.29Z"/>
      <path className="cls-1" d="M252.29,389.62h2.47v16.47h-2.47v-16.47Z"/>
      <path className="cls-1" d="M268.11,391.79h-5.11v-2.17h12.67v2.17h-5.09v14.29h-2.47v-14.29h0Z"/>
      <path className="cls-1" d="M283.45,389.62h2.49v9.95c0,2.81,1.56,4.62,4.44,4.62s4.42-1.8,4.42-4.62v-9.95h2.49v10c0,4.1-2.3,6.76-6.91,6.76s-6.94-2.69-6.94-6.74v-10.02h.01Z"/>
      <path className="cls-1" d="M310.22,391.79h-5.11v-2.17h12.67v2.17h-5.09v14.29h-2.47v-14.29h0Z"/>
      <path className="cls-1" d="M326.04,389.62h11.06v2.17h-8.59v4.81h8.42v2.17h-8.42v5.14h8.59v2.17h-11.06v-16.47h0Z"/>
    </g>

    <path className="cls-1" d="M266.01,241.02c-3.61-15.64-7.8-21.48-7.8-40.93s-.22-58.7-2.21-71.32c-1.99,12.61-2.21,51.87-2.21,71.32s-4.18,25.29-7.8,40.93c-3.61,15.64,10.01,24.07,10.01,24.07,0,0,13.62-8.44,10.01-24.07h0Z"/>
  </svg>
);

interface LogoWithGlassProps {
  className?: string;
  size?: number;
}

// ---------- Component ----------
export const LogoWithGlass = ({
  size = 192,           // px
  className = "",
}: LogoWithGlassProps) => {
  return (
    <div
      className={cn("logo-glass-wrap", className)}
      style={{ width: size, height: size }}
    >
      {/* Scoped styles */}
      <style dangerouslySetInnerHTML={{ __html: styles }} />

      <div className="logo-box">
        {/* GLASS LAYER (under the SVG) */}
        <div
          className="glass-layer"
          // make the shield path available to CSS clip-path:path()
          style={{ ["--shield-path" as string]: `"${SHIELD_PATH_D.trim()}"` }}
        >
          {/* Fallback: HTML element with CSS clip-path:path() */}
          <div className="glass-html glass-css" />

          {/* Preferred: SVG foreignObject clipped to the SAME path and coordinates */}
          <svg
            className="glass-svg"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512"
            width="100%"
            height="100%"
          >
            <defs>
              <clipPath id="shield-clip">
                <path d={SHIELD_PATH_D} />
              </clipPath>
            </defs>

            <foreignObject
              x="0" y="0" width="512" height="512"
              clipPath="url(#shield-clip)"
            >
              <div className="glass-html" />
            </foreignObject>

            {/* Optional crisp outline to read the edge */}
            <path d={SHIELD_PATH_D} fill="none" stroke="rgba(255,255,255,0.45)" strokeWidth="1.2" />
          </svg>
        </div>

        {/* LOGO LAYER (on top) */}
        <div className="logo-layer">
          <LOGO_SVG />
        </div>
      </div>
    </div>
  );
};